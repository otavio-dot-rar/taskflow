---
description: 
globs: 
alwaysApply: true
---
# Estrutura de Arquivos e ConvenÃ§Ãµes

## Estrutura Raiz do Projeto

```
taskflow-app/
â”œâ”€â”€ .cursor/rules/           # Regras do Cursor (este diretÃ³rio)
â”œâ”€â”€ backend/                # Processo Principal Electron
â”œâ”€â”€ frontend/               # Processo Renderer (Next.js)
â”œâ”€â”€ dist/                   # Build compilado
â”œâ”€â”€ node_modules/           # DependÃªncias
â”œâ”€â”€ package.json            # ConfiguraÃ§Ã£o do projeto
â”œâ”€â”€ pnpm-lock.yaml         # Lock file do pnpm
â”œâ”€â”€ tsconfig.json          # ConfiguraÃ§Ã£o TypeScript global
â”œâ”€â”€ components.json        # ConfiguraÃ§Ã£o shadcn/ui (frontend)
â””â”€â”€ README.md              # DocumentaÃ§Ã£o
```

## Main Process ([backend/](mdc:backend))

```
backend/
â”œâ”€â”€ main.ts                 # Entry point principal do Electron
â”œâ”€â”€ preload.ts             # Bridge IPC segura
â”œâ”€â”€ services/              # LÃ³gica de negÃ³cio (parser .mdc, etc.)
â”‚   â”œâ”€â”€ mdc-parser.ts      # Parser .mdc (âœ… implementado)
â”‚   â””â”€â”€ ai-project-generator.ts  # Gerador IA (ğŸ“‹ planejado Fase 4)
â”œâ”€â”€ types/                 # Tipos TypeScript especÃ­ficos do main
â”œâ”€â”€ utils/                 # UtilitÃ¡rios do processo main
â””â”€â”€ tsconfig.json          # Config TypeScript especÃ­fico do backend
```

### Arquivos Principais

- **[main.ts](mdc:backend/main.ts):** Gerenciamento de janelas, configuraÃ§Ã£o de seguranÃ§a, handlers IPC
- **[preload.ts](mdc:backend/preload.ts):** API segura exposta ao renderer via `contextBridge`

## Renderer Process ([frontend/](mdc:frontend))

```
frontend/
â”œâ”€â”€ app/                   # Next.js App Router
â”‚   â”œâ”€â”€ layout.tsx        # Layout raiz da aplicaÃ§Ã£o
â”‚   â”œâ”€â”€ page.tsx          # PÃ¡gina principal
â”‚   â”œâ”€â”€ globals.css       # Estilos globais Tailwind
â”‚   â””â”€â”€ favicon.ico       # Ãcone da aplicaÃ§Ã£o
â”œâ”€â”€ components/           # Componentes React
â”‚   â”œâ”€â”€ ui/              # Componentes shadcn/ui
â”‚   â”œâ”€â”€ WorkspaceDashboard.tsx  # Layout principal (âœ… implementado)
â”‚   â”œâ”€â”€ DashboardView.tsx       # View principal (âœ… implementado)
â”‚   â”œâ”€â”€ KanbanBoard.tsx         # View Kanban (âœ… implementado)
â”‚   â”œâ”€â”€ ViewSwitcher.tsx        # Toggle views (âœ… implementado)
â”‚   â”œâ”€â”€ Sidebar.tsx             # NavegaÃ§Ã£o lateral (âœ… implementado)
â”‚   â”œâ”€â”€ ProjectSelector.tsx     # SeleÃ§Ã£o projeto (âœ… implementado)
â”‚   â”œâ”€â”€ TaskCard.tsx            # Cards de tarefas (âœ… implementado)
â”‚   â”œâ”€â”€ KanbanColumn.tsx        # Colunas Kanban (âœ… implementado)
â”‚   â””â”€â”€ EtapaHeader.tsx         # Headers etapas (âœ… implementado)
â”œâ”€â”€ lib/                 # UtilitÃ¡rios e configuraÃ§Ãµes
â”‚   â””â”€â”€ utils.ts         # FunÃ§Ãµes utilitÃ¡rias (cn, etc.)
â”œâ”€â”€ hooks/               # Custom React hooks
â”œâ”€â”€ types/               # Tipos TypeScript frontend
â”œâ”€â”€ stores/              # Gerenciamento de estado (Zustand)
â”œâ”€â”€ next.config.ts       # ConfiguraÃ§Ã£o Next.js
â”œâ”€â”€ postcss.config.mjs   # ConfiguraÃ§Ã£o PostCSS
â”œâ”€â”€ tsconfig.json        # Config TypeScript especÃ­fico
â””â”€â”€ public/              # Assets estÃ¡ticos
```

## ConvenÃ§Ãµes de Nomenclatura

### Arquivos e DiretÃ³rios
- **Componentes React:** `PascalCase.tsx` (ex: `KanbanBoard.tsx`)
- **PÃ¡ginas Next.js:** `lowercase.tsx` (ex: `page.tsx`, `layout.tsx`)
- **Hooks:** `use*.ts` (ex: `useWorkspace.ts`)
- **Types/Interfaces:** `types.ts` ou `*.types.ts`
- **Utilities:** `utils.ts` ou `*.utils.ts`
- **DiretÃ³rios:** `kebab-case` ou `lowercase`

### Componentes shadcn/ui
Localizados em `frontend/components/ui/`:
- **InstalaÃ§Ã£o:** `npx shadcn@latest add <component>`
- **ImportaÃ§Ã£o:** `import { Button } from "@/components/ui/button"`
- **CustomizaÃ§Ã£o:** Permitida, mas manter compatibilidade

### Aliases TypeScript
Configurados em [components.json](mdc:components.json):
```typescript
"@/components"  â†’ "frontend/components"
"@/lib"         â†’ "frontend/lib" 
"@/hooks"       â†’ "frontend/hooks"
"@/ui"          â†’ "frontend/components/ui"
"@/utils"       â†’ "frontend/lib/utils"
```

## Estrutura de Build

### Desenvolvimento
```
dist/                     # Compilado unificado
â”œâ”€â”€ main.js              # backend/main.ts compilado
â”œâ”€â”€ preload.js           # backend/preload.ts compilado
â””â”€â”€ backend/             # Outros arquivos backend compilados

frontend/.next/          # Build temporÃ¡rio Next.js
```

### ProduÃ§Ã£o
```
dist/                    # Build final
â”œâ”€â”€ main.js             # Backend compilado
â”œâ”€â”€ preload.js          # Preload compilado
â”œâ”€â”€ frontend/           # Next.js static export
â”‚   â”œâ”€â”€ index.html
â”‚   â”œâ”€â”€ _next/
â”‚   â””â”€â”€ ...
â””â”€â”€ packaged/           # Electron Builder output
    â”œâ”€â”€ win-unpacked/
    â”œâ”€â”€ taskflow-app-1.0.0.exe
    â””â”€â”€ ...
```

## ConfiguraÃ§Ãµes Importantes

### [tsconfig.json](mdc:tsconfig.json) (Raiz)
- **CompilaÃ§Ã£o:** ES2020, CommonJS para Electron
- **References:** Backend e frontend como projetos separados
- **Strict mode:** Habilitado

### [package.json](mdc:package.json)
```json
{
  "main": "dist/main.js",          # Entry point Electron
  "homepage": "./",                # Base path para static export
  "packageManager": "pnpm@9.15.3" # Lock pnpm version
}
```

### Scripts de Build
```json
{
  "build": "pnpm build:backend && pnpm build:frontend",
  "build:backend": "tsc -p backend/tsconfig.json",
  "build:frontend": "cd frontend && next build"
}
```

## Regras de OrganizaÃ§Ã£o

### ğŸ“ SeparaÃ§Ã£o de Responsabilidades
- **Backend process:** Sistema de arquivos, dialogs, persistÃªncia
- **Frontend process:** UI, interaÃ§Ãµes, estado visual
- **IPC:** ComunicaÃ§Ã£o mÃ­nima e tipada

### ğŸ“ ConvenÃ§Ãµes de CÃ³digo
- **Imports:** Absolute paths com aliases (`@/`)
- **Components:** Um componente por arquivo
- **Types:** Interfaces explÃ­citas para IPC
- **CSS:** Tailwind classes, evitar CSS custom

### ğŸ”’ SeguranÃ§a
- **Nunca:** `nodeIntegration: true`
- **Sempre:** `contextIsolation: true`
- **IPC:** Apenas atravÃ©s do preload script
- **File access:** Apenas no backend process

## BenefÃ­cios da Nova Estrutura

### âœ… Vantagens
- **SeparaÃ§Ã£o clara:** Frontend e backend bem definidos
- **Build simplificado:** Caminhos mais diretos
- **ConfiguraÃ§Ã£o TypeScript:** Projetos independentes
- **PadrÃ£o da comunidade:** Estrutura amplamente adotada
- **Manutenibilidade:** Mais fÃ¡cil de entender e modificar

### ğŸ”§ MigraÃ§Ã£o
- **De:** `src-main/` â†’ **Para:** `backend/`
- **De:** `src-renderer/` â†’ **Para:** `frontend/`
- **De:** `dist-main/` â†’ **Para:** `dist/`
- **ConfiguraÃ§Ãµes:** Atualizar caminhos em scripts e configs


